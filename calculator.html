<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Calculator Test</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="css/main.css">
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
        <script src="js/calc.js"></script>
    </head>
    
    <body>
        <div class="container" id="cal">
            <div class="equals"><p></p></div>
            <div class="clear">C</div>
            
            <span>7</span>
            <span>8</span>
            <span>9</span>
            <span>+</span>
            
            <span>4</span>
            <span>5</span>
            <span>6</span>
            <span>-</span>
            
            <span>1</span>
            <span>2</span>
            <span>3</span>
            <span>/</span>
            
            <span>0</span>
            <span>.</span>
            <span>=</span>
            <span>*</span>
        </div>
    </body>
</html>

<script>
    window.onload=function(){
        var buttons = document.getElementsByTagName('span'),
            equals = document.querySelectorAll('.equals p')[0],
            clear = document.getElementsByClassName('clear')[0];
        for (var i = 0; i < buttons.length; i+= 1){
            if (buttons[i].innerHTML === '='){
                buttons[i].addEventListener("click", calculate(i));
            } else {
                buttons[i].addEventListener("click", addValue(i));
            }
        }
        
        clear.onclick = function(){
            equals.innerHTML = '';
        };
        
        function addValue(i){
            return function(){
                if(buttons[i].innerHTML === '/'){
                    equals.innerHTML += '/';
                } else if (buttons[i].innerHTML === 'x'){
                    equals.innerHTML += '*';
                } else{
                    equals.innerHTML += buttons[i].innerHTML;
                }
            };
        }
        
        function calculate(i){
            return function(){
                var final_res = equals.innerHTML;
                var bugFix = final_res.replace(/\d+/g, function(numb){
                    return parseInt(numb, 10);
                });
                equals.innerHTML = eval(bugFix);
            };
        }
    };
</script>